<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>周教学质量管控-信息查询</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="stylesheet" href="../lib/layui-v2.6.3/css/layui.css" media="all">
	<link rel="stylesheet" href="../css/public.css" media="all">
	<style>
		/* 核心修改：牛油果色系全局适配 */
		/* 1. 全局背景：牛油果浅绿，奠定查询页面柔和基调 */
		body {
			background-color: #e6f5e9 !important;
			margin: 0;
			padding: 15px;
		}

		/* 2. 容器背景：白色，与全局浅绿分层，突出查询内容 */
		.layuimini-container {
			background-color: #fff !important;
			border-radius: 8px !important;
			box-shadow: 0 2px 10px rgba(106, 153, 78, 0.1) !important;
			padding: 20px;
		}

		/* 3. 搜索区域（fieldset）：牛油果极浅绿背景+浅绿边框 */
		.table-search-fieldset {
			border-color: #c9e2d0 !important;
			background-color: #f9fdf7 !important;
			border-radius: 8px !important;
			padding: 15px 20px !important;
			margin-bottom: 20px !important;
		}

		/* 搜索区域标题：牛油果深绿，突出搜索主题 */
		.table-search-fieldset legend {
			color: #6a994e !important;
			font-weight: 500 !important;
			padding: 0 10px !important;
			font-size: 16px !important;
		}

		/* 4. 表单标签：牛油果配套深灰，确保文字可读性 */
		.layui-form-label {
			color: #4e5969 !important;
			font-weight: 500 !important;
		}

		/* 5. 输入框/下拉框：牛油果浅绿边框，聚焦时加深反馈 */
		.layui-input, .layui-select {
			border-color: #c9e2d0 !important;
			border-radius: 6px !important;
		}
		.layui-input:focus, .layui-select:focus {
			border-color: #6a994e !important;
			box-shadow: 0 0 0 2px rgba(106, 153, 78, 0.1) !important;
		}

		/* 6. 搜索按钮：牛油果深绿，替代原浅灰，增强点击辨识度 */
		.layui-btn.layui-btn-primary[data-search-btn] {
			background-color: #6a994e !important;
			border-color: #6a994e !important;
			color: #fff !important;
		}
		.layui-btn.layui-btn-primary[data-search-btn]:hover {
			background-color: #5a8a40 !important;
			border-color: #5a8a40 !important;
		}

		/* 7. 表格样式：同步牛油果色系，提升数据可读性 */
		/* 表格头部 */
		.layui-table thead th {
			background-color: #f9fdf7 !important;
			color: #6a994e !important;
			border-bottom-color: #c9e2d0 !important;
		}
		/* 表格行边框 */
		.layui-table td, .layui-table th {
			border-color: #f0f7ed !important;
		}
		/* 表格 hover 行背景 */
		.layui-table tbody tr:hover {
			background-color: #f9fdf7 !important;
		}

		/* 8. 表格操作按钮：适配牛油果色系 */
		/* 查看详情按钮（正常蓝→牛油果浅绿） */
		.layui-btn.layui-btn-normal.layui-btn-xs[data-count-edit] {
			background-color: #85b665 !important;
			border-color: #85b665 !important;
		}
		/* 修改按钮（默认灰→牛油果配套灰绿） */
		.layui-btn.layui-btn-xs[data-count-edit]:not(.layui-btn-normal):not(.layui-btn-danger) {
			background-color: #a4c78e !important;
			border-color: #a4c78e !important;
			color: #fff !important;
		}
		/* 删除按钮（保持红色，确保警示性，仅调整边框） */
		.layui-btn.layui-btn-danger.layui-btn-xs[data-count-delete] {
			border-color: #ff4d4f !important;
		}

		/* 9. 开关组件：适配牛油果色系（启用状态→深绿） */
		.layui-form-switch.layui-form-checked {
			background-color: #6a994e !important;
			border-color: #6a994e !important;
		}
		.layui-form-switch.layui-form-checked em {
			left: 22px !important;
		}

		/* 10. 列布局适配：修复左右列间距，避免重叠 */
		.layui-col-md6 {
			margin-bottom: 15px;
		}
		@media (max-width: 768px) {
			.layui-col-md6 {
				width: 100% !important;
				padding: 0 !important;
			}
			.layui-form-item .layui-inline {
				margin-bottom: 10px !important;
				width: 100% !important;
			}
			.layui-form-item .layui-input-inline {
				width: calc(100% - 100px) !important;
			}
		}

		/* 11. 弹窗样式：同步牛油果色系，保持一致性 */
		.layui-layer-title {
			background-color: #6a994e !important;
			color: #fff !important;
			border-bottom: none !important;
		}
		.layui-layer-btn .layui-layer-btn0 {
			background-color: #6a994e !important;
			border-color: #6a994e !important;
		}
		.layui-layer-btn .layui-layer-btn0:hover {
			background-color: #5a8a40 !important;
			border-color: #5a8a40 !important;
		}
	</style>
</head>
<body>
<div class="layuimini-container">
	<div class="layuimini-main">

		<fieldset class="table-search-fieldset">
			<legend>搜索周教学计划信息</legend>
			<div style="margin: 10px 10px 10px 10px">
				<form class="layui-form layui-form-pane" action="">
					<div class="layui-form-item">
						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label">教学名称</label>
								<div class="layui-input-inline">
									<input type="text" name="kaoshimingcheng" placeholder="请输入教学名称" autocomplete="off" class="layui-input">
								</div>
							</div>
						    
						<div class="layui-inline">
							<label class="layui-form-label">教师</label>
							<div class="layui-input-inline">
								<input type="text" name="realName" placeholder="请输入教师姓名" autocomplete="off" class="layui-input">
							</div>
						</div>
						
						<div class="layui-col-md6">
							<div class="layui-form-item">
									 <label class="layui-form-label">班级</label>
									 <div class="layui-input-block">
						   <select lay-search="{caseSensitive:true}">
						     <option value="">请选择班级</option>
						     <option value="1">24130416</option>
						     <option value="2">24130417</option>
						     <option value="3">24130418</option>
						     <option value="4">24130419</option>
						     <option value="5">24130420</option>
						     <option value="6">24130421</option>
						     <option value="7">24130422</option>
						     <option value="8">24130423</option>
						   </select>
									</div>
						 </div>
						 </div>
						 <div class="layui-col-md6">
						 	<div class="layui-form-item">
						 			 <label class="layui-form-label">周次</label>
						 			 <div class="layui-input-block">
						    <select lay-search="{caseSensitive:true}">
						      <option value="">请选择周次</option>
						      <option value="1">第1周</option>
						      <option value="2">第2周</option>
						      <option value="3">第3周</option>
						      <option value="4">第4周</option>
						      <option value="5">第5周</option>
						      <option value="6">第6周</option>
						      <option value="7">第7周</option>
						      <option value="8">第8周</option>
						      <option value="9">第9周</option>
						      <option value="10">第10周</option>
						      <option value="11">第11周</option>
						      <option value="12">第12周</option>
						      <option value="13">第13周</option>
						      <option value="14">第14周</option>
						    </select>
						 			</div>
						  </div>
						  </div>
						  <div class="layui-col-md6">
						  				<div class="layui-form-item">
						  						 <label class="layui-form-label">星期</label>
						  						 <div class="layui-input-block">
						  			   <select lay-search="{caseSensitive:true}">
						  			     
						  			     <option value="1">星期日</option>
						  			     <option value="2">星期一</option>
						  			     <option value="3">星期二</option>
						  			     <option value="4">星期三</option>
						  			     <option value="5">星期四</option>
						  			     <option value="6">星期五</option>
						  			     <option value="7">星期六</option>
						  			    
						  			   </select>
						  						</div>
						  			 </div>
						  			 </div>
						  
						  
						  	<div class="layui-col-md6">
						  		<div class="layui-form-item">
						  				 <label class="layui-form-label">时间段</label>
						  				 <div class="layui-input-block">
						  	   <select lay-search="{caseSensitive:true}">
						  	     <option value="">请选择时间段</option>
						  	     <option value="1">8:00-9:40</option>
						  	     <option value="2">10:10-11:50</option>
						  	     <option value="3">14:30-16:10</option>
						  	     <option value="4">16:40-18:20</option>
						  	     <option value="5">19:30-21:10</option>
						  	   </select>
						  				</div>
						  	 </div>
						  	 </div>
						
						<div class="layui-inline">
							<button type="submit" class="layui-btn layui-btn-primary"  lay-submit lay-filter="data-search-btn"><i class="layui-icon"></i> 搜 索</button>
						</div>
					</div>
				</form>
			</div>
		</fieldset>

		

		<table class="layui-hide" id="currentTableId" lay-filter="currentTableFilter"></table>

		<!--自定义的列模板-->
		<script type="text/html" id="statusTableBar">
			<input type="checkbox" name="status" value="{{d.userid}}" lay-skin="switch" lay-text="启用|禁用" lay-event="open" lay-filter="modifystatus" {{ d.status == '1'? 'checked' : '' }}/>
		</script>

		<script type="text/html" id="currentTableBar">
			<a class="layui-btn layui-btn-normal layui-btn-xs data-count-edit" lay-event="detail">查看详情</a>
			<a class="layui-btn layui-btn-xs data-count-edit" lay-event="edit">修改内容</a>
			<a class="layui-btn layui-btn-xs layui-btn-danger data-count-delete" lay-event="delete">删除</a>
		</script>

	</div>
</div>
<script src="../lib/layui-v2.6.3/layui.js">
			
		</script>
<script>
	layui.use(['form', 'table', 'layer'], function () {
		var $ = layui.jquery,
				form = layui.form,
				table = layui.table,
				layer = layui.layer;

		// 表格渲染（保留原逻辑，从z.json加载数据）
		table.render({
			elem: '#currentTableId',
			url: '../api/z.json',
			toolbar: '#toolbarDemo',
			defaultToolbar: ['filter', 'exports', 'print', {
				title: '提示',
				layEvent: 'LAYTABLE_TIPS',
				icon: 'layui-icon-tips'
			}],
			cols: [[
				{type: "checkbox", width: 50},
				{field: 'id', width: 80, title: '序号', sort: true},
				{field: 'realname', width: 80, title: '教师'},
				{field: 'time', width: 150, title: '时间段'},
				{field: 'classname', title: '班级', width: 100},
				{field: 'name', width: 100, title: '教学名称'},
				{field: 'week', width: 100, title: '周次'},
				{title: '操作', minWidth: 130, toolbar: '#currentTableBar', align: "center"}
			]],
			limits: [10, 15, 20, 25, 50, 100],
			limit: 15,
			page: true,
			skin: 'line'
		});

		// 监听搜索操作（保留原逻辑，弹窗显示搜索参数并重载表格）
		form.on('submit(data-search-btn)', function (data) {
			var result = JSON.stringify(data.field);
			layer.alert(result, {
				title: '最终的搜索信息',
				skin: 'layui-layer-molv' // 同步牛油果色系弹窗皮肤
			});

			//执行搜索重载
			table.reload('currentTableId', {
				page: {
					curr: 1
				},
				where: {
					searchParams: result
				}
			}, 'data');

			return false;
		});

		// 监听开关状态修改（保留原逻辑）
		form.on('switch(modifystatus)', function(obj){
			console.log(obj);
			var param = obj.value;
			// 可在此处添加开关状态提交逻辑（如接口请求）
		});

		/**
		 * 表格工具栏监听事件（保留原删除选中行逻辑）
		 */
		table.on('toolbar(currentTableFilter)', function (obj) {
		    if (obj.event === 'delete') {  
				var checkStatus = table.checkStatus('currentTableId')
						,  // 监听删除操作
				 data = checkStatus.data;
				layer.alert(JSON.stringify(data));
			}
		});

		//监听表格复选框选择
		table.on('checkbox(currentTableFilter)', function (obj) {
			console.log(obj)
		});

		table.on('tool(currentTableFilter)', function (obj) {
			var data = obj.data;
			if(obj.event === 'detail'){
				//layer.alert("查看详情");
				var index = layer.open({
					title: '查看详情',
					type: 2,
					shade: 0.2,
					maxmin:true,
					shadeClose: true,
					area: ['100%', '100%'],
					content: 'zXQ.html',
				});
				$(window).on("resize", function () {
					layer.full(index);
				});
				return false;
			} else if (obj.event === 'edit') {

				var index = layer.open({
					title: '修改内容',
					type: 2,
					shade: 0.2,
					maxmin:true,
					shadeClose: true,
					area: ['100%', '100%'],
					content: 'ZXQ.html',
				});
				$(window).on("resize", function () {
					layer.full(index);
				});
				return false;
			} else if (obj.event === 'delete') {
				layer.confirm('真的删除行么', function (index) {
					obj.del();
					layer.close(index);
				});
			}
		});

	});

	// 年选择器（选择入学年份）
	
	
	layui.use(function(){
	  var laydate = layui.laydate;
laydate.render({
    elem: '#ID-laydate-range',
    range: ['#ID-laydate-start-date', '#ID-laydate-end-date']
  });
  });

</script>

</body>
</html>